<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Boutique AI</title>

<style>
:root{
  --primary:#d63384;
  --light:#fff0f6;
}
body{
  margin:0;
  font-family:Segoe UI,sans-serif;
  background:linear-gradient(135deg,#fdfcfb,#e2d1c3);
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}
.chat-container{
  width:400px;
  height:680px;
  background:#fff;
  border-radius:20px;
  box-shadow:0 20px 40px rgba(0,0,0,.2);
  display:flex;
  flex-direction:column;
  overflow:hidden;
}
.chat-header{
  background:var(--primary);
  color:#fff;
  padding:16px;
  text-align:center;
  font-weight:bold;
}
.cart{
  font-size:12px;
}
#chat-box{
  flex:1;
  padding:15px;
  overflow-y:auto;
  background:#fafafa;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.msg{
  max-width:85%;
  padding:12px 15px;
  border-radius:16px;
  font-size:14px;
  animation:fade .3s;
}
.bot{background:#fff;border:1px solid #eee;align-self:flex-start;}
.user{background:var(--primary);color:#fff;align-self:flex-end;}
.typing{font-size:12px;color:#999;font-style:italic}

.product-card{
  border:2px solid #eee;
  border-radius:14px;
  padding:12px;
  margin-top:8px;
  cursor:pointer;
}
.product-card:hover{
  border-color:var(--primary);
  background:var(--light);
}
.product-card img{
  width:100%;
  border-radius:10px;
  margin-bottom:6px;
}

button.option{
  margin:6px 6px 0 0;
  padding:6px 14px;
  border-radius:20px;
  border:none;
  background:var(--primary);
  color:#fff;
  font-size:12px;
  cursor:pointer;
}
.input-area{
  padding:12px;
  border-top:1px solid #eee;
  display:flex;
}
input{
  flex:1;
  padding:10px;
  border-radius:20px;
  border:1px solid #ccc;
}
button.send{
  margin-left:8px;
  border:none;
  border-radius:20px;
  background:var(--primary);
  color:#fff;
  padding:8px 16px;
}
@keyframes fade{from{opacity:0;transform:translateY(5px)}to{opacity:1}}
</style>
</head>

<body>

<div class="chat-container">
  <div class="chat-header">
    ðŸ‘— Boutique Stylist AI<br>
    <span class="cart">ðŸ›’ Cart: <span id="cartCount">0</span></span>
  </div>

  <div id="chat-box"></div>

  <div class="input-area">
    <input id="userInput" placeholder="Ask me about dresses..." />
    <button class="send" onclick="handleSend()">Send</button>
  </div>
</div>

<script>
const chatBox=document.getElementById("chat-box");
const userInput=document.getElementById("userInput");
const cartCount=document.getElementById("cartCount");

const inventory=[
 {id:1,name:"Velvet Anarkali",price:"â‚¹4,200",img:"https://via.placeholder.com/300x180?text=Velvet+Anarkali",sizes:["S","M","L","XL"],colors:["Maroon","Black","Green"]},
 {id:2,name:"Silk Party Gown",price:"â‚¹5,500",img:"https://via.placeholder.com/300x180?text=Silk+Gown",sizes:["M","L"],colors:["Rose Pink","Gold"]},
 {id:3,name:"Floral Summer Dress",price:"â‚¹2,800",img:"https://via.placeholder.com/300x180?text=Summer+Dress",sizes:["S","M","L"],colors:["Yellow","White","Peach"]}
];

let selectedProduct=null;
let selectedSize=null;
let cart=[];
let waitingForOrder=false;

function addMessage(text,sender){
  const div=document.createElement("div");
  div.className=`msg ${sender}`;
  div.innerHTML=text;
  chatBox.appendChild(div);
  chatBox.scrollTop=chatBox.scrollHeight;
}

function typing(){
  const t=document.createElement("div");
  t.className="typing";
  t.id="typing";
  t.textContent="Stylist is typing...";
  chatBox.appendChild(t);
  chatBox.scrollTop=chatBox.scrollHeight;
}

function stopTyping(){
  const t=document.getElementById("typing");
  if(t)t.remove();
}

function showCatalog(){
  let html="<b>âœ¨ Our Exclusive Collection</b>";
  inventory.forEach(p=>{
    html+=`
    <div class="product-card" onclick="selectProduct(${p.id})">
      <img src="${p.img}">
      <b>${p.name}</b><br>
      ðŸ’° ${p.price}
    </div>`;
  });
  addMessage(html,"bot");
}

function selectProduct(id){
  selectedProduct=inventory.find(p=>p.id===id);
  selectedSize=null;
  addMessage(`I like <b>${selectedProduct.name}</b>`,"user");

  setTimeout(()=>{
    addMessage(`
      ðŸ‘— <b>${selectedProduct.name}</b><br>
      ðŸ’° ${selectedProduct.price}<br><br>
      <b>Select Size:</b><br>
      ${selectedProduct.sizes.map(s=>`<button class="option" onclick="selectSize('${s}')">${s}</button>`).join("")}
    `,"bot");
  },400);
}

function selectSize(size){
  selectedSize=size;
  addMessage(`Size ${size}`,"user");

  setTimeout(()=>{
    addMessage(`
      <b>Select Color:</b><br>
      ${selectedProduct.colors.map(c=>`<button class="option" onclick="addToCart('${c}')">${c}</button>`).join("")}
    `,"bot");
  },400);
}

function addToCart(color){
  addMessage(color,"user");
  cart.push({name:selectedProduct.name,size:selectedSize,color});
  cartCount.textContent=cart.length;

  setTimeout(()=>{
    addMessage(`
      âœ… Added to Cart!<br><br>
      <button class="option" onclick="showCatalog()">Shop More</button>
      <button class="option" onclick="showCart()">View Cart</button>
    `,"bot");
  },400);
}

function showCart(){
  if(cart.length===0){
    addMessage("ðŸ›’ Your cart is empty","bot");
    return;
  }
  let html="<b>Your Cart:</b><br>";
  cart.forEach((c,i)=>{
    html+=`${i+1}. ${c.name} (${c.size}, ${c.color})<br>`;
  });
  addMessage(html,"bot");
}

function handleSend(){
  const text=userInput.value.trim();
  if(!text)return;
  addMessage(text,"user");
  userInput.value="";
  typing();

  const input=text.toLowerCase();

  setTimeout(()=>{
    stopTyping();

    if(input.match(/hi|hello|hey/)){
      addMessage("Hey! ðŸ‘‹ What can I help you with today? ðŸ’•","bot");
    }
    else if(input.includes("show")||input.includes("collection")){
      showCatalog();
    }
    else if(input.includes("cart")){
      showCart();
    }
    else if(input.includes("track")){
      addMessage("ðŸ“¦ Order tracking will be available soon.","bot");
    }
    else{
      addMessage("I can help you shop dresses ðŸ‘—<br>Try <b>show collection</b>","bot");
    }
  },600);
}

window.onload=()=>{
  addMessage(`
    Hey! ðŸ‘‹ Iâ€™m your personal Boutique Stylist ðŸ’•<br><br>
    <button class="option" onclick="showCatalog()">Show Collection</button>
    <button class="option" onclick="showCart()">View Cart</button>
  `,"bot");
};

userInput.addEventListener("keypress",e=>{
  if(e.key==="Enter")handleSend();
});
</script>

</body>
</html>
